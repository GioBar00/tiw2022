<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:with="lastPage = @{/documents(subFolder=${session.lastPage})}"
        th:replace="fragments/main.html :: layout('Home Page', ${move} ? ${lastPage} : ~{}, ${session.user.username()}, ~{::body})" lang="en">
<head>
    <meta charset="UTF-8">
    <title>HomePage</title>
</head>
<body>

<div th:switch="${move}">
    <div th:case="false">
        <a th:href="@{/content-management}">Edit</a>
        <p>Folders:</p>
        <p th:if="${folders.isEmpty()}">Empty</p>
        <ul>
            <li th:each="folder : ${folders}" th:class="Folder">
                <div th:text="${folder.key.name}"></div>
                <ul>
                    <li th:each="subFolder : ${folder.value}">
                        <a th:text="${subFolder.name}" th:href="@{/documents(subFolder=${subFolder.id})}"></a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <div th:case="true">
        <h3 th:text="'You are moving the document ' + ${document.name} + ' from the subfolder : ' + ${fromSubFolder} + '. Choose a destination subfolder.'"></h3>
        <ul>
            <li th:each="folder : ${folders}">
                <div th:text="${folder.key.name}"></div>
                <ul>
                    <li th:each="subFolder : ${folder.value}">
                        <p th:style="${subFolder.id == fromSubFolder ? 'color: red;' : 'color: black;'}"
                           th:text="${subFolder.name}"></p>
                        <form th:if="${subFolder.id != fromSubFolder}" action="#" method="POST">
                            <button type="submit" name="selectedSubFolder" value="" th:value="${subFolder.id}">Select
                                SubFolder
                            </button>
                            <input type="hidden" id="documentId" name="documentId" value="" th:value="${document.id}">
                        </form>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>


</body>
</html>